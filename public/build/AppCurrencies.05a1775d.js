import{j as r,f as u,v as I,A as w,J as V,r as g,e as B,o as U,a as S,P as $,b as c,c as l,d as a,g as h,F as v,O as _,u as i,h as j,H as E,I as q,D as L}from"./vendor.3c5bca8b.js";import{a as N,_ as O}from"./index.aeeddaf6.js";function C(e){var t;return r("div",{class:'"border border-dark col d-flex flex-column m-1'},[r("div",{class:"d-flex"},[r(u("AppInputGuesser"),{field:{label:"Active",name:"active",type:"boolean"},form:"none",id:`${(t=e.currency.code)==null?void 0:t.toLowerCase()}-active`,modelValue:e.currency.active,"onUpdate:modelValue":async n=>{await e.store.update(e.currency,n)}}),e.currency.code]),r("span",`1 \u20AC = ${e.currency.base} ${e.currency.symbol}`),r("span",e.currency.name)])}C.props={currency:{required:!0,type:Object},store:{required:!0,type:Object}};function x(e){let t="d-flex pe-2 ps-2";return e.field.type!=="boolean"&&(t+=" w-100"),r("div",{class:t},[r("label",{class:"col-form-label me-2",for:e.id},e.field.label),r(u("AppInputGuesser"),{field:e.field,form:"currencies-search",id:e.id,modelValue:e.store[e.field.name],"onUpdate:modelValue"(n){e.store[e.field.name]=n}})])}x.props={field:N(),id:{required:!0,type:String},store:{required:!0,type:Object}};function P(e){const t=[[]];let n=0;for(const s of e)t[n].length>=7&&(t[++n]=[]),t[n].push(s);return t}var z=I("currencies",{actions:{async fetch(){this.$reset();const e=await new w().fetch("/api/currencies","GET");e.status===200&&(this.items=e.content["hydra:member"])},resetFilters(){this.active=!1,this.code=null,this.name=null},async update(e,t){const n=new FormData;n.append("active",t);const s=await new w([{name:"active",type:"boolean"}]).fetch(`/api/currencies/${e.id}`,"PATCH",n);s.status===200&&(this.items[this.items.findIndex(f=>f["@id"]===s.content["@id"])]=s.content)}},getters:{split:e=>P(e.items.filter(t=>!(e.active&&!t.active||e.code&&!t.code.toUpperCase().startsWith(e.code.toUpperCase())||e.name&&!t.name.toUpperCase().startsWith(e.name.toUpperCase()))))},state:()=>({active:!1,code:null,items:[],name:null})});const D=e=>(E("data-v-87815a0e"),e=e(),q(),e),G={class:"row"},H={class:"col-2"},T=j(" Devises "),W={class:"col"},J={class:"d-flex justify-content-between"},M=D(()=>a("hr",null,null,-1)),R={class:"h-100 overflow-auto"},K={__name:"AppCurrencies",setup(e){V(A=>({"3e9d7cbe":i(f)}));const t=g(),n=[{field:{label:"Actif",name:"active",type:"boolean"},id:"currencies-search-active"},{field:{label:"Code",name:"code"},id:"currencies-search-code"},{field:{label:"Nom",name:"name"},id:"currencies-search-name"}],s=g(0),f=B(()=>`${s.value}px`),o=z();function y(){o.resetFilters()}function p(){t.value&&(s.value=window.top.innerHeight-t.value.getBoundingClientRect().top-5)}return U(async()=>{await o.fetch(),window.addEventListener("resize",p),y()}),S(()=>{window.removeEventListener("resize",p)}),$(p),(A,Q)=>{const k=u("Fa"),F=u("AppBtn");return c(),l("div",{ref_key:"el",ref:t,class:"currencies overflow-hidden"},[a("div",G,[a("div",H,[a("h1",null,[h(k,{icon:"euro-sign"}),T])]),a("div",W,[a("div",J,[h(F,{icon:"times",title:"Annuler",type:"reset",variant:"danger",onClick:y}),(c(),l(v,null,_(n,({id:m,field:d})=>h(i(x),{id:m,key:d.name,field:d,store:i(o)},null,8,["id","field","store"])),64))])])]),M,a("div",R,[(c(!0),l(v,null,_(i(o).split,(m,d)=>(c(),l("div",{key:d,class:"row"},[(c(!0),l(v,null,_(m,b=>(c(),L(i(C),{key:b.code,currency:b,store:i(o)},null,8,["currency","store"]))),128))]))),128))])],512)}}};var Z=O(K,[["__scopeId","data-v-87815a0e"]]);export{Z as default};
