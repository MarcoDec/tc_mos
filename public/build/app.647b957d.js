var I=Object.defineProperty;var O=Object.getOwnPropertySymbols;var j=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var y=(e,t,n)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h=(e,t)=>{for(var n in t||(t={}))j.call(t,n)&&y(e,n,t[n]);if(O)for(var n of O(t))P.call(t,n)&&y(e,n,t[n]);return e};import{d as p,a as d,c as k,b as D,e as V,u as U,f as w,r as G,g as $,h as B,o as F,i as m,j as E,k as S,l as N,w as x,m as q,n as T,p as H,F as M,q as W,s as z,t as J,v as K,_ as Q,x as X}from"./vendor.2217986f.js";const Y="modulepreload",C={},Z="/build/",a=function(t,n){return!n||n.length===0?t():Promise.all(n.map(o=>{if(o=`${Z}${o}`,o in C)return;C[o]=!0;const r=o.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${i}`))return;const s=document.createElement("link");if(s.rel=r?"stylesheet":Y,r||(s.as="script",s.crossOrigin=""),s.href=o,document.head.appendChild(s),r)return new Promise((_,l)=>{s.addEventListener("load",_),s.addEventListener("error",l)})})).then(()=>t())};const ee=p(async()=>a(()=>import("./AppCard.ee21d22e.js"),["AppCard.ee21d22e.js","slots.b02cc9c1.js","vendor.2217986f.js"])),te=p(async()=>a(()=>import("./AppForm.2a6f5a4b.js"),["AppForm.2a6f5a4b.js","vendor.2217986f.js"])),ne=p(async()=>a(()=>import("./AppFormGroup.2314cc8e.js"),["AppFormGroup.2314cc8e.js","vendor.2217986f.js"])),oe=p(async()=>a(()=>import("./AppInput.fe5196cd.js"),["AppInput.fe5196cd.js","vendor.2217986f.js"])),se=p(async()=>a(()=>import("./AppLabel.684bfa37.js"),["AppLabel.684bfa37.js","bootstrap-5.4d5f92e0.js","vendor.2217986f.js"])),re=p(async()=>a(()=>import("./AppCol.237420a6.js"),["AppCol.237420a6.js","bootstrap-5.4d5f92e0.js","vendor.2217986f.js"])),ae=p(async()=>a(()=>import("./AppContainer.e561131e.js"),["AppContainer.e561131e.js","vendor.2217986f.js"])),pe=p(async()=>a(()=>import("./AppRow.d313bdc2.js"),["AppRow.d313bdc2.js","slots.b02cc9c1.js","vendor.2217986f.js"])),ce=p(async()=>a(()=>import("./AppNavbar.aa9b2fa0.js"),["AppNavbar.aa9b2fa0.js","vendor.2217986f.js"])),ie=p(async()=>a(()=>import("./AppNavbarBrand.1226f70a.js"),["AppNavbarBrand.1226f70a.js","vendor.2217986f.js"])),_e=p(async()=>a(()=>import("./AppBtn.4d53a009.js"),["AppBtn.4d53a009.js","vendor.2217986f.js"])),ue=p(async()=>a(()=>import("./AppTopNavbar.543c44eb.js"),["AppTopNavbar.543c44eb.js","vendor.2217986f.js"])),de=p(async()=>a(()=>import("./AppRouterLink.95edfc80.js"),["AppRouterLink.95edfc80.js","vendor.2217986f.js"]));var le=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",AppCard:ee,AppForm:te,AppFormGroup:ne,AppInput:oe,AppLabel:se,AppCol:re,AppContainer:ae,AppRow:pe,AppNavbar:ce,AppNavbarBrand:ie,AppBtn:_e,AppTopNavbar:ue,AppRouterLink:de});const me=1;function L(e,t){const n=new Date;n.setHours(n.getHours()+me),d.set(e,t,{expires:n})}function f(e){return d.get(e)}function Ee(){return typeof f("id")!="undefined"&&typeof f("token")!="undefined"}function fe(){d.remove("id"),d.remove("token")}function Ae(e,t){L("id",e.toString()),L("token",t)}async function A(e,t){const n=h({headers:{}},t),o=n.query,r=n.params;let i=e;if(n.headers.Accept="application/ld+json",n.json&&(n.body=JSON.stringify(n.json),n.headers["Content-Type"]="application/json"),o){const s=new URLSearchParams;Object.keys(o).forEach(_=>{o[_]!==void 0&&s.set(_,o[_])}),i+=`?${s.toString()}`}return r&&Object.keys(r).forEach(s=>i=i.replace(`{${s}}`,r[s])),fetch(i,n).then(s=>{if(s.status===204)return null;if(s.status>=200&&s.status<300)return s.json();throw s})}var u;(function(e){e.CONNECT="CONNECT",e.LOGIN="LOGIN",e.LOGOUT_USERS="LOGOUT_USERS"})(u||(u={}));const Re={async[u.CONNECT]({commit:e}){if(Ee()){const t=f("id");if(typeof t=="undefined")return;const n=await A("/api/employees/{id}",{params:{id:t}});e(c.SET_USER,n.username)}},async[u.LOGIN]({commit:e},{password:t,username:n}){try{const o=await A("/api/login",{json:{password:t!=null?t:"",username:n!=null?n:""},method:"post"});typeof o.id!="undefined"&&typeof o.token!="undefined"&&o.token!==null&&typeof o.username!="undefined"&&(Ae(o.id,o.token),e(c.SET_USER,o.username))}catch(o){if(o instanceof Response){const r=await o.json(),i=typeof r=="string"?r:`${r["hydra:title"]} : ${r["hydra:description"]}`;e(c.MSG_ERROR,i),e(c.CODE,o.status),e(c.ERROR,!0)}}},async[u.LOGOUT_USERS]({commit:e}){await A("/api/logout",{method:"post"}),fe(),e(c.SET_USER,null)}};var c;(function(e){e.CODE="CODE",e.SET_USER="SET_USER",e.ERROR="ERROR",e.LOGOUT="LOGOUT",e.MSG_ERROR="MSG_ERROR"})(c||(c={}));const ve={[c.SET_USER](e,t){e.username=t},[c.ERROR](e){e.error=!0},[c.LOGOUT](e){e.error=!1},[c.MSG_ERROR](e,t){e.msgError=t},[c.CODE](e,t){e.code=t}},Oe={hasUser:e=>e.username!==null},ye={code:null,error:!1,msgError:null,password:null,username:null},he={actions:Re,getters:Oe,mutations:ve,namespaced:!0,state:ye};var R;(function(e){e.SPINNER="SPINNER"})(R||(R={}));const Se={[R.SPINNER](e){e.spinner=!e.spinner}},Ne={spinner:!1},b=k({modules:{users:he},state:Ne,mutations:Se,strict:!1}),v=D({history:V(),routes:[{component:async()=>a(()=>import("./AppHome.97916c03.js"),["AppHome.97916c03.js","vendor.2217986f.js"]),meta:{requiresAuth:!0},name:"home",path:"/"},{component:async()=>a(()=>import("./AppLogin.5c319da8.js"),["AppLogin.5c319da8.js","vendor.2217986f.js"]),meta:{requiresAuth:!1},name:"login",path:"/login"}]});v.beforeEach(async e=>{console.log("getters",U(b,"users",["hasUser"]).hasUser.value);const t=d.get("token");if(e.matched.some(n=>n.meta.requiresAuth&&n.name!=="login")&&!t)return{name:"login"}});var Te=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n};const Ce=e=>(W("data-v-e29d406c"),e=e(),z(),e),Le={key:0,class:"overlay"},be=Ce(()=>J("div",{class:"spinner spinner-border spinner-border-sm"},null,-1)),ge=[be],Ie=w({setup(e){const t=G(!1),n=$(["spinner"]).spinner,o=B("users",[u.CONNECT])[u.CONNECT];return F(async()=>{try{await o()}catch{await v.push({name:"login"})}t.value=!0}),(r,i)=>{const s=m("AppTopNavbar"),_=m("RouterView"),l=m("AppContainer");return E(),S(M,null,[N(s),N(l,null,{default:x(()=>[t.value?(E(),q(_,{key:0})):T("",!0)]),_:1}),H(n)?(E(),S("div",Le,ge)):T("",!0)],64)}}});var je=Te(Ie,[["__scopeId","data-v-e29d406c"]]);K.add(Q);const g=X(je).use(v).use(b).component("Fa",p(async()=>a(()=>import("./FontAwesomeIcon.e6638ebc.js"),["FontAwesomeIcon.e6638ebc.js","vendor.2217986f.js"])));for(const[e,t]of Object.entries(le))g.component(e,t);g.mount("#vue");export{u as A,R as M,c as a,v as r};
