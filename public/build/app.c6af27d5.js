var j=Object.defineProperty;var v=Object.getOwnPropertySymbols;var I=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;var y=(e,t,n)=>t in e?j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,h=(e,t)=>{for(var n in t||(t={}))I.call(t,n)&&y(e,n,t[n]);if(v)for(var n of v(t))g.call(t,n)&&y(e,n,t[n]);return e};import{d as c,a as d,c as D,b as P,e as V,r as k,u as w,f as U,o as G,g as E,h as m,i as S,j as L,w as M,k as $,l as b,m as B,F,p as H,n as q,q as x,s as W,t as z,_ as J,v as K}from"./vendor.c88dd02b.js";const Q="modulepreload",T={},X="/build/",a=function(t,n){return!n||n.length===0?t():Promise.all(n.map(o=>{if(o=`${X}${o}`,o in T)return;T[o]=!0;const p=o.endsWith(".css"),i=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${i}`))return;const r=document.createElement("link");if(r.rel=p?"stylesheet":Q,p||(r.as="script",r.crossOrigin=""),r.href=o,document.head.appendChild(r),p)return new Promise((_,l)=>{r.addEventListener("load",_),r.addEventListener("error",l)})})).then(()=>t())};const Y=c(async()=>a(()=>import("./AppCard.54c8a90b.js"),["AppCard.54c8a90b.js","slots.b02cc9c1.js","vendor.c88dd02b.js"])),Z=c(async()=>a(()=>import("./AppForm.2725c967.js"),["AppForm.2725c967.js","vendor.c88dd02b.js"])),ee=c(async()=>a(()=>import("./AppFormGroup.c6a7791b.js"),["AppFormGroup.c6a7791b.js","vendor.c88dd02b.js"])),te=c(async()=>a(()=>import("./AppInput.10100ad2.js"),["AppInput.10100ad2.js","vendor.c88dd02b.js"])),ne=c(async()=>a(()=>import("./AppLabel.d9576e29.js"),["AppLabel.d9576e29.js","bootstrap-5.4d5f92e0.js","vendor.c88dd02b.js"])),oe=c(async()=>a(()=>import("./AppCol.6f4ad163.js"),["AppCol.6f4ad163.js","bootstrap-5.4d5f92e0.js","vendor.c88dd02b.js"])),re=c(async()=>a(()=>import("./AppContainer.ce529917.js"),["AppContainer.ce529917.js","vendor.c88dd02b.js"])),se=c(async()=>a(()=>import("./AppRow.6b1d3b3c.js"),["AppRow.6b1d3b3c.js","slots.b02cc9c1.js","vendor.c88dd02b.js"])),ae=c(async()=>a(()=>import("./AppNavbar.ae257160.js"),["AppNavbar.ae257160.js","vendor.c88dd02b.js"])),pe=c(async()=>a(()=>import("./AppNavbarBrand.54eab12d.js"),["AppNavbarBrand.54eab12d.js","vendor.c88dd02b.js"])),ce=c(async()=>a(()=>import("./AppBtn.00d23838.js"),["AppBtn.00d23838.js","vendor.c88dd02b.js"])),ie=c(async()=>a(()=>import("./AppTopNavbar.d92cf7c2.js"),["AppTopNavbar.d92cf7c2.js","vendor.c88dd02b.js"])),_e=c(async()=>a(()=>import("./AppRouterLink.a3240817.js"),["AppRouterLink.a3240817.js","vendor.c88dd02b.js"]));var ue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",AppCard:Y,AppForm:Z,AppFormGroup:ee,AppInput:te,AppLabel:ne,AppCol:oe,AppContainer:re,AppRow:se,AppNavbar:ae,AppNavbarBrand:pe,AppBtn:ce,AppTopNavbar:ie,AppRouterLink:_e});const de=1;function N(e,t){const n=new Date;n.setHours(n.getHours()+de),d.set(e,t,{expires:n})}function A(e){return d.get(e)}function le(){return typeof A("id")!="undefined"&&typeof A("token")!="undefined"}function Ee(){d.remove("id"),d.remove("token")}function me(e,t){N("id",e.toString()),N("token",t)}async function f(e,t){const n=h({headers:{}},t),o=n.query,p=n.params;let i=e;if(n.headers.Accept="application/ld+json",n.json&&(n.body=JSON.stringify(n.json),n.headers["Content-Type"]="application/json"),o){const r=new URLSearchParams;Object.keys(o).forEach(_=>{o[_]!==void 0&&r.set(_,o[_])}),i+=`?${r.toString()}`}return p&&Object.keys(p).forEach(r=>i=i.replace(`{${r}}`,p[r])),fetch(i,n).then(r=>{if(r.status===204)return null;if(r.status>=200&&r.status<300)return r.json();throw r})}var u;(function(e){e.CONNECT="CONNECT",e.LOGIN="LOGIN",e.LOGOUT_USERS="LOGOUT_USERS"})(u||(u={}));const Ae={async[u.CONNECT]({commit:e}){if(le()){const t=A("id");if(typeof t=="undefined")return;const n=await f("/api/employees/{id}",{params:{id:t}});e(s.SET_USER,n.username)}},async[u.LOGIN]({commit:e},{password:t,username:n}){try{const o=await f("/api/login",{json:{password:t!=null?t:"",username:n!=null?n:""},method:"post"});typeof o.id!="undefined"&&typeof o.token!="undefined"&&o.token!==null&&typeof o.username!="undefined"&&(me(o.id,o.token),e(s.SET_USER,o.username))}catch(o){if(o instanceof Response){let p="";try{const i=await o.json();p=typeof i=="string"?i:`${i["hydra:title"]} : ${i["hydra:description"]}`}catch{p=o.statusText,e(s.SHOW_MODAL,!0)}e(s.MSG_ERROR,p),e(s.CODE,o.status),e(s.ERROR,!0)}else e(s.ERROR,!1)}},async[u.LOGOUT_USERS]({commit:e}){try{await f("/api/logout",{method:"post"}),Ee(),e(s.SET_USER,null)}catch(t){if(t instanceof Response)try{await t.json()}catch{e(s.SHOW_MODAL,!0)}else e(s.ERROR,!1)}}};var s;(function(e){e.CODE="CODE",e.SET_USER="SET_USER",e.ERROR="ERROR",e.LOGOUT="LOGOUT",e.MSG_ERROR="MSG_ERROR",e.SHOW_MODAL="SHOW_MODAL"})(s||(s={}));const fe={[s.SET_USER](e,t){e.username=t},[s.ERROR](e){e.error=!0},[s.LOGOUT](e){e.error=!1},[s.MSG_ERROR](e,t){e.msgError=t},[s.CODE](e,t){e.code=t},[s.SHOW_MODAL](e){e.showModal=!e.showModal}},Re={hasUser:e=>e.username!==null},Oe={code:null,error:!1,msgError:null,password:null,showModal:!1,username:null},ve={actions:Ae,getters:Re,mutations:fe,namespaced:!0,state:Oe},R=D({history:P(),routes:[{component:async()=>a(()=>import("./AppHome.652e5b8b.js"),["AppHome.652e5b8b.js","vendor.c88dd02b.js"]),meta:{requiresAuth:!0},name:"home",path:"/"},{component:async()=>a(()=>import("./AppModalError.f44553b7.js"),["AppModalError.f44553b7.js","AppModalError.36f22516.css","vendor.c88dd02b.js"]),meta:{requiresAuth:!1},name:"error",path:"/error"},{component:async()=>a(()=>import("./AppLogin.0a9b618e.js"),["AppLogin.0a9b618e.js","vendor.c88dd02b.js","AppModalError.f44553b7.js","AppModalError.36f22516.css"]),meta:{requiresAuth:!1},name:"login",path:"/login"}]});R.beforeEach(async e=>{const t=d.get("token");if(e.matched.some(n=>n.meta.requiresAuth&&n.name!=="login")&&!t)return{name:"login"}});var ye=(e,t)=>{const n=e.__vccOpts||e;for(const[o,p]of t)n[o]=p;return n};const he=e=>(H("data-v-2d293383"),e=e(),q(),e),Se={key:0,class:"overlay"},Le=he(()=>x("div",{class:"spinner spinner-border spinner-border-sm"},null,-1)),be=[Le],Te=V({setup(e){const t=k(!1),n=w(["spinner"]).spinner,o=U("users",[u.CONNECT])[u.CONNECT];return G(async()=>{try{await o()}catch{await R.push({name:"login"})}t.value=!0}),(p,i)=>{const r=E("AppTopNavbar"),_=E("RouterView"),l=E("AppContainer");return m(),S(F,null,[L(r),L(l,null,{default:M(()=>[t.value?(m(),$(_,{key:0})):b("",!0)]),_:1}),B(n)?(m(),S("div",Se,be)):b("",!0)],64)}}});var Ne=ye(Te,[["__scopeId","data-v-2d293383"]]),O;(function(e){e.SPINNER="SPINNER"})(O||(O={}));const Ce={[O.SPINNER](e){e.spinner=!e.spinner}},je={spinner:!1},Ie=W({modules:{users:ve},mutations:Ce,state:je,strict:!1});z.add(J);const C=K(Ne).use(R).use(Ie).component("Fa",c(async()=>a(()=>import("./FontAwesomeIcon.e2c01475.js"),["FontAwesomeIcon.e2c01475.js","vendor.c88dd02b.js"])));for(const[e,t]of Object.entries(ue))C.component(e,t);C.mount("#vue");export{u as A,s as M,ye as _,O as a,R as r};
