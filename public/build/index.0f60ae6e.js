var D=Object.defineProperty,w=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var x=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;var I=(e,t,r)=>t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,l=(e,t)=>{for(var r in t||(t={}))x.call(t,r)&&I(e,r,t[r]);if(v)for(var r of v(t))C.call(t,r)&&I(e,r,t[r]);return e},m=(e,t)=>w(e,S(t));import{a as A,d as n,b as $,u as k,c as F,r as d,o as E,e as b,f as y,w as N,g as M,h as P,i as q,F as B,j,k as G,m as H,l as z,n as U,p as W,q as J,_ as Q}from"./vendor.0f89d933.js";const K="modulepreload",h={},X="/build/",o=function(t,r){return!r||r.length===0?t():Promise.all(r.map(s=>{if(s=`${X}${s}`,s in h)return;h[s]=!0;const p=s.endsWith(".css"),i=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${i}`))return;const a=document.createElement("link");if(a.rel=p?"stylesheet":K,p||(a.as="script",a.crossOrigin=""),a.href=s,document.head.appendChild(a),p)return new Promise((c,u)=>{a.addEventListener("load",c),a.addEventListener("error",u)})})).then(()=>t())};function O(e,t){const r=new Date;r.setHours(r.getHours()+1),A.set(e,t,{expires:r})}function f(e){return A.get(e)}function Y(){return typeof f("id")!="undefined"&&typeof f("token")!="undefined"}function L(){A.remove("id"),A.remove("token")}function Z(e,t){O("id",e.toString()),O("token",t)}const ee=n(async()=>o(()=>import("./AppCard.b90b9731.js"),["AppCard.b90b9731.js","vendor.0f89d933.js"])),te=n(async()=>o(()=>import("./AppForm.9586a8cc.js"),["AppForm.9586a8cc.js","vendor.0f89d933.js"])),re=n(async()=>o(()=>import("./AppFormGroup.d433260b.js"),["AppFormGroup.d433260b.js","vendor.0f89d933.js"])),oe=n(async()=>o(()=>import("./AppInput.38b95b64.js"),["AppInput.38b95b64.js","vendor.0f89d933.js"])),ne=n(async()=>o(()=>import("./AppInputGuesser.647b2c8e.js"),["AppInputGuesser.647b2c8e.js","vendor.0f89d933.js"])),se=n(async()=>o(()=>import("./AppInvalidFeedback.5ee8a466.js"),["AppInvalidFeedback.5ee8a466.js","slots.b02cc9c1.js","vendor.0f89d933.js"])),pe=n(async()=>o(()=>import("./AppLabel.6eac1a3f.js"),["AppLabel.6eac1a3f.js","bootstrap-5.49ab83b6.js","vendor.0f89d933.js"])),ae=n(async()=>o(()=>import("./AppRadio.c5a3aa2b.js"),["AppRadio.c5a3aa2b.js","vendor.0f89d933.js"])),ie=n(async()=>o(()=>import("./AppRadioGroup.cb5f87eb.js"),["AppRadioGroup.cb5f87eb.js","vendor.0f89d933.js"])),ce=n(async()=>o(()=>import("./AppSearchBool.fbef2de0.js"),["AppSearchBool.fbef2de0.js","vendor.0f89d933.js"])),ue=n(async()=>o(()=>import("./AppSelect.a266b2cd.js"),["AppSelect.a266b2cd.js","vendor.0f89d933.js"])),_e=n(async()=>o(()=>import("./AppSelectOption.b3f6bf8b.js"),["AppSelectOption.b3f6bf8b.js","vendor.0f89d933.js"])),le=n(async()=>o(()=>import("./AppSwitch.ab037c94.js"),["AppSwitch.ab037c94.js","vendor.0f89d933.js"])),me=n(async()=>o(()=>import("./AppCol.d06d4f75.js"),["AppCol.d06d4f75.js","bootstrap-5.49ab83b6.js","vendor.0f89d933.js"])),de=n(async()=>o(()=>import("./AppContainer.3c37c69b.js"),["AppContainer.3c37c69b.js","vendor.0f89d933.js"])),Ae=n(async()=>o(()=>import("./AppRow.4422fa13.js"),["AppRow.4422fa13.js","slots.b02cc9c1.js","vendor.0f89d933.js"])),fe=n(async()=>o(()=>import("./AppModal.fc534137.js"),["AppModal.fc534137.js","bootstrap.esm.d4ddfc07.js","vendor.0f89d933.js"])),Ee=n(async()=>o(()=>import("./AppNavbar.4569a7e7.js"),["AppNavbar.4569a7e7.js","vendor.0f89d933.js"])),ye=n(async()=>o(()=>import("./AppNavbarBrand.9c06fba0.js"),["AppNavbarBrand.9c06fba0.js","vendor.0f89d933.js"])),Re=n(async()=>o(()=>import("./AppNavbarCollapse.c2c6be1a.js"),["AppNavbarCollapse.c2c6be1a.js","slots.b02cc9c1.js","vendor.0f89d933.js"])),Te=n(async()=>o(()=>import("./AppNavbarItem.ecb1e6c9.js"),["AppNavbarItem.ecb1e6c9.js","bootstrap.esm.d4ddfc07.js","vendor.0f89d933.js"])),ve=n(async()=>o(()=>import("./AppNavbarLink.69b81679.js"),["AppNavbarLink.69b81679.js","vendor.0f89d933.js"])),Ie=n(async()=>o(()=>import("./AppAlert.6d14a684.js"),["AppAlert.6d14a684.js","vendor.0f89d933.js"])),be=n(async()=>o(()=>import("./AppBadge.724c3859.js"),["AppBadge.724c3859.js","vendor.0f89d933.js"])),Pe=n(async()=>o(()=>import("./AppBtn.f9979a2b.js"),["AppBtn.f9979a2b.js","vendor.0f89d933.js"])),he=n(async()=>o(()=>import("./AppModalError.38fb7cdb.js"),["AppModalError.38fb7cdb.js","vendor.0f89d933.js","bootstrap.esm.d4ddfc07.js"])),Oe=n(async()=>o(()=>import("./AppTopNavbar.746eb9ed.js"),["AppTopNavbar.746eb9ed.js","vendor.0f89d933.js"])),Le=n(async()=>o(()=>import("./AppTree.b74a7919.js"),["AppTree.b74a7919.js","vendor.0f89d933.js"])),ge=n(async()=>o(()=>import("./AppTreeClickableItem.6fea39db.js"),["AppTreeClickableItem.6fea39db.js","vendor.0f89d933.js"])),Ve=n(async()=>o(()=>import("./AppTreeForm.dc9966ee.js"),["AppTreeForm.dc9966ee.js","vendor.0f89d933.js"])),De=n(async()=>o(()=>import("./AppTreeFormItem.2a7c0fd1.js"),["AppTreeFormItem.2a7c0fd1.js","vendor.0f89d933.js"])),we=n(async()=>o(()=>import("./AppTreeItem.884555f9.js"),["AppTreeItem.884555f9.js","vendor.0f89d933.js"])),Se=n(async()=>o(()=>import("./AppTreeRow.7fde26e2.js"),["AppTreeRow.7fde26e2.js","vendor.0f89d933.js"])),xe=n(async()=>o(()=>import("./AppRouterLink.bd548e4d.js"),["AppRouterLink.bd548e4d.js","vendor.0f89d933.js"])),Ce=n(async()=>o(()=>import("./AppRowsTableItem.7130df13.js"),["AppRowsTableItem.7130df13.js","vendor.0f89d933.js"])),$e=n(async()=>o(()=>import("./AppRowsTableItems.22b19a28.js"),["AppRowsTableItems.22b19a28.js","vendor.0f89d933.js"])),ke=n(async()=>o(()=>import("./AppRowsTableItemField.047c3c7b.js"),["AppRowsTableItemField.047c3c7b.js","vendor.0f89d933.js"])),Fe=n(async()=>o(()=>import("./AppRowsTableItemInput.c7ef4b05.js"),["AppRowsTableItemInput.c7ef4b05.js","vendor.0f89d933.js"])),Ne=n(async()=>o(()=>import("./AppRowsTableItemComponent.317a9f34.js"),["AppRowsTableItemComponent.317a9f34.js","vendor.0f89d933.js"])),Me=n(async()=>o(()=>import("./AppRowsTableAddItems.84f96aaf.js"),["AppRowsTableAddItems.84f96aaf.js","vendor.0f89d933.js"])),qe=n(async()=>o(()=>import("./AppRowsTableItemGuesser.3dabcfca.js"),["AppRowsTableItemGuesser.3dabcfca.js","vendor.0f89d933.js"])),Be=n(async()=>o(()=>import("./AppRowsTableAdd.879c3c5b.js"),["AppRowsTableAdd.879c3c5b.js","vendor.0f89d933.js"])),je=n(async()=>o(()=>import("./AppRowsTableField.870d7280.js"),["AppRowsTableField.870d7280.js","vendor.0f89d933.js"])),Ge=n(async()=>o(()=>import("./AppRowsTableFields.62040190.js"),["AppRowsTableFields.62040190.js","vendor.0f89d933.js"])),He=n(async()=>o(()=>import("./AppRowsTableHeaders.a56dab60.js"),["AppRowsTableHeaders.a56dab60.js","vendor.0f89d933.js"])),ze=n(async()=>o(()=>import("./AppRowsTable.f6aa8a82.js"),["AppRowsTable.f6aa8a82.js","vendor.0f89d933.js"]));var Ue=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",AppCard:ee,AppForm:te,AppFormGroup:re,AppInput:oe,AppInputGuesser:ne,AppInvalidFeedback:se,AppLabel:pe,AppRadio:ae,AppRadioGroup:ie,AppSearchBool:ce,AppSelect:ue,AppSelectOption:_e,AppSwitch:le,AppCol:me,AppContainer:de,AppRow:Ae,AppModal:fe,AppNavbar:Ee,AppNavbarBrand:ye,AppNavbarCollapse:Re,AppNavbarItem:Te,AppNavbarLink:ve,AppAlert:Ie,AppBadge:be,AppBtn:Pe,AppModalError:he,AppTopNavbar:Oe,AppTree:Le,AppTreeClickableItem:ge,AppTreeForm:Ve,AppTreeFormItem:De,AppTreeItem:we,AppTreeRow:Se,AppRouterLink:xe,AppRowsTableItem:Ce,AppRowsTableItems:$e,AppRowsTableItemField:ke,AppRowsTableItemInput:Fe,AppRowsTableItemComponent:Ne,AppRowsTableAddItems:Me,AppRowsTableItemGuesser:qe,AppRowsTableAdd:Be,AppRowsTableField:je,AppRowsTableFields:Ge,AppRowsTableHeaders:He,AppRowsTable:ze});const We={key:0,class:"overlay"},Je=j("div",{class:"position-relative spinner-border start-50 top-50",role:"status"},null,-1),Qe=[Je],Ke=$({setup(e){const t=k(),r=F(["spinner"]).spinner;return(s,p)=>{const i=d("AppModalError"),a=d("AppTopNavbar"),c=d("RouterView"),u=d("AppContainer");return E(),b(B,null,[y(i,{id:"modal-error"}),y(a),y(u,null,{default:N(()=>[(E(),M(c,{key:P(t).name}))]),_:1}),P(r)?(E(),b("div",We,Qe)):q("",!0)],64)}}});var _=G(Ke);const R=H();async function g(e,t,r){const s={Accept:"application/ld+json"},p=f("token");typeof p=="string"&&(s.Authorization=`Bearer ${p}`);const i={headers:s,method:t};let a=e;if(r instanceof FormData)i.body=r,r.forEach((u,T)=>{a.includes(`{${T}}`)&&(a=a.replace(`{${T}}`,u))});else{i.headers["Content-Type"]="application/json",["delete","get"].includes(t)||(i.body=JSON.stringify(r));for(const u in r)a.includes(`{${u}}`)&&(a=a.replace(`{${u}}`,r[u]))}const c=await fetch(a,i);if(t==="delete")return null;if([401,422].includes(c.status))throw c;if(c.status!==204)return await c.json()}const Xe={async fetchApi({commit:e},t){e("spin");try{return await g(t.url,t.method,t.body)}catch(r){throw r instanceof Response?r.status!==422&&(e("responseError",{status:r.status,text:await r.json()}),R.emit("error")):(e("error"),R.emit("error")),r}finally{e("spin")}},async registerModule(e,t){_.config.globalProperties.$store.registerModule(t.path,t.module)},async unregisterModule(e,t){_.config.globalProperties.$store.unregisterModule(t)}},Ye={async login({commit:e,dispatch:t},{password:r,username:s}){const p=await t("fetchApi",{body:{password:r!=null?r:"",username:s!=null?s:""},method:"post",url:"/api/login"},{root:!0});Z(p.id,p.token),e("user",p.username)},async logout({commit:e,dispatch:t}){await t("fetchApi",{body:{},method:"post",url:"/api/logout"},{root:!0}),L(),e("user",null)}},Ze={hasUser:e=>e.username!==null},et={user(e,t){e.username=t}};function tt(e){return{actions:Ye,getters:Ze,mutations:et,namespaced:!0,state:e}}const rt={error(e){e.text="Une erreur s'est produite."},responseError(e,{status:t,text:r}){e.status=t,e.text=r},spin(e){e.spinner=!e.spinner}},ot={spinner:!1,status:0,text:null},nt={rowspan:e=>e.prices.length+1};function st(e){return{getters:nt,namespaced:!0,state:e}}const pt={rowspan:()=>1};function at(e){return{getters:pt,namespaced:!0,state:e}}const it={async fetchItem({dispatch:e}){const t=[{delete:!0,proportion:"aaaaaa",delai:5,moq:1,poidsCu:"bbbbb",reference:"ccc",indice:1,prices:[{delete:!1,price:1e3,quantite:100,ref:"afsfsfss",id:1,update:!0,update2:!1},{delete:!1,price:1e3,quantite:30,ref:"azertsscssy",id:3,update:!0,update2:!1}],name:"CAMION FR-MD",update:!0,update2:!1,id:1},{delete:!0,proportion:"vvvvvv",delai:15,moq:2,poidsCu:"aaaa",reference:"wwwww",indice:2,prices:[{delete:!1,price:100,quantite:50,ref:"azerty",id:2,update:!0,update2:!1}],name:"CAMION",update:!0,update2:!1,id:2}],r=[];for(let s=0;s<t.length;s++)r.push(e("registerModule",m(l({},t[s]),{index:s+1})));await Promise.all(r)},async registerModule({dispatch:e},t){const r=[],s=[];for(let p=0;p<t.prices.length;p++)r.push(e("registerModule",{module:at(m(l({},t.prices[p]),{index:p+1})),path:["componentSupplierPrices",t.prices[p].id.toString()]},{root:!0})),s.push(`componentSupplierPrices/${t.prices[p].id}`);await Promise.all(r),await e("registerModule",{module:st(m(l({},t),{prices:s})),path:["componentSuppliers",t.id.toString()]},{root:!0})}},ct={items:e=>Object.keys(e).map(t=>`componentSuppliers/${t}`),rows(e,t,r){const s=[];for(const p of Object.keys(e)){const i=[`componentSuppliers/${p}`],a=[...r.componentSuppliers[p].prices];a.length>0&&i.push(a.shift()),s.push(i);for(const c of a)s.push([c])}return s}},ut={},_t={actions:it,getters:ct,mutations:ut,namespaced:!0},lt={},mt={items:e=>Object.values(e)},dt={},At={actions:lt,getters:mt,mutations:dt,namespaced:!0};function ft(e){return z({actions:Xe,modules:{security:tt(e),componentSuppliers:_t,componentSupplierPrices:At},mutations:rt,state:ot,strict:!1})}const V=U({history:W(),routes:[{component:async()=>o(()=>import("./AppTreePageWrapper.b2811995.js"),["AppTreePageWrapper.b2811995.js","vendor.0f89d933.js","_commonjsHelpers.04e31c8c.js"]),meta:{requiresAuth:!0},name:"component-families",path:"/component-families",props:{extraFields:[{label:"Code",name:"code",type:"text"},{label:"Cuivre",name:"copperable",type:"boolean"}],title:"composants",type:"Composants",url:"/api/component-families"}},{component:async()=>o(()=>import("./AppHome.de81fbb4.js"),["AppHome.de81fbb4.js","vendor.0f89d933.js"]),meta:{requiresAuth:!0},name:"home",path:"/"},{component:async()=>o(()=>import("./AppLogin.a469efad.js"),["AppLogin.a469efad.js","vendor.0f89d933.js"]),meta:{requiresAuth:!1},name:"login",path:"/login"},{component:async()=>o(()=>import("./AppTreePageWrapper.b2811995.js"),["AppTreePageWrapper.b2811995.js","vendor.0f89d933.js","_commonjsHelpers.04e31c8c.js"]),meta:{requiresAuth:!0},name:"product-families",path:"/product-families",props:{title:"produits",type:"Produits",url:"/api/product-families"}},{component:async()=>o(()=>import("./AppRowsTablePage.34adc1b5.js"),["AppRowsTablePage.34adc1b5.js","vendor.0f89d933.js"]),meta:{requiresAuth:!0},name:"prices",path:"/prices",props:{fields:[{create:!1,filter:!0,label:"Nom",name:"name",sort:!1,type:"text",update:!0,prefix:"componentSuppliers"},{create:!0,filter:!0,label:"Proportion",name:"proportion",sort:!1,type:"text",update:!0,prefix:"componentSuppliers"},{create:!0,filter:!0,label:"D\xE9lai",name:"delai",sort:!1,type:"number",update:!0,prefix:"componentSuppliers"},{create:!1,filter:!0,label:"Moq",name:"moq",sort:!1,type:"number",update:!0,prefix:"componentSuppliers"},{create:!1,filter:!0,label:"Poids cu",name:"poidsCu",sort:!1,type:"text",update:!0,prefix:"componentSuppliers"},{create:!1,filter:!0,label:"R\xE9f\xE9rence",name:"reference",sort:!1,type:"text",update:!0,prefix:"componentSuppliers"},{create:!0,filter:!0,label:"Indice",name:"indice",sort:!1,type:"number",update:!0,prefix:"componentSuppliers"},{create:!1,filter:!0,children:[{create:!0,filter:!0,label:"\u20AC",name:"price",prefix:"componentSupplierPrices",sort:!1,type:"number",update:!0},{create:!0,filter:!0,label:"Q",name:"quantite",prefix:"componentSupplierPrices",sort:!1,type:"number",update:!0},{create:!0,filter:!0,label:"ref",name:"ref",prefix:"componentSupplierPrices",sort:!1,type:"number",update:!0}],label:"Prix",name:"prices",sort:!1,type:"text",update:!0,prefix:"componentSuppliers"}]}}]});J.add(Q);_.provide("emitter",R).component("Fa",n(async()=>o(()=>import("./FontAwesomeIcon.e5d7e896.js"),["FontAwesomeIcon.e5d7e896.js","vendor.0f89d933.js","_commonjsHelpers.04e31c8c.js"])));for(const[e,t]of Object.entries(Ue))_.component(e,t);async function Et(){const e={username:null};if(Y()){const r=f("id");if(typeof r=="string")try{const s=await g("/api/employees/{id}","get",{id:r});typeof s.username=="string"&&(e.username=s.username)}catch{}e.username===null&&L()}const t=ft(e);_.use(t),V.beforeEach(r=>{if(r.matched.some(s=>s.meta.requiresAuth&&s.name!=="login")&&!t.getters["security/hasUser"])return{name:"login"}})}Et().then(()=>_.use(V).mount("#vue"));export{V as r};
