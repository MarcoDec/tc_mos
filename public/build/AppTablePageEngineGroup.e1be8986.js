import{A as B}from"./index.aeeddaf6.js";import{f as _,b as A,D as x,C as p,u as F,g as u,c as G,O as L,F as q}from"./vendor.3c5bca8b.js";const N={__name:"AppTablePageEngineGroup",props:{icon:{required:!0,type:String},title:{required:!0,type:String}},setup(C){const k=[{text:"",value:null},{text:"Contrepartie de test",type:"CounterPartGroup",value:"/api/counter-part-groups"},{text:"Poste de travail",type:"WorkstationGroup",value:"/api/workstation-groups"},{text:"Outil",type:"ToolGroup",value:"/api/tool-groups"}],P=[{label:"Code",name:"code",sort:!0,update:!0},{label:"Nom",name:"name",sort:!0,update:!0},{label:"Type",name:"@type",options:{label:o=>{var e,t;return(t=(e=k.find(n=>n.type===o))==null?void 0:e.text)!=null?t:null},options:k},sort:!1,type:"select",update:!1}];async function w(o,e,t){e.send("submit");try{const n=o.get("@type");if(n===null)throw[{message:"Cette valeur ne doit pas \xEAtre vide.",propertyPath:"@type"}];await t.create(o,n),e.send("success")}catch(n){e.send("fail",{violations:n})}}async function S(o,e,t){var n;e.send("submit"),await t.goTo(o,(n=t.search["@type"])!=null?n:null),e.send("success")}async function T(o,e,t){e.send("submit"),await t.fetch(o.get("@type")),e.send("success")}return(o,e)=>{const t=_("AppBtn"),n=_("AppForm"),h=_("AppPaginationItem");return A(),x(F(B),{fields:P,icon:C.icon,title:C.title},{create:p(({fields:s,icon:r,id:l,inline:i,machine:c,noContent:d,store:m,submitLabel:b,variant:f})=>[u(n,{id:l,fields:s,inline:i,"no-content":d,"submit-label":b,onSubmit:a=>w(a,c,m)},{default:p(({disabled:a,form:y,submitLabel:g,type:v})=>[u(t,{disabled:a,form:y,icon:r,title:g,type:v,variant:f},null,8,["disabled","form","icon","title","type","variant"])]),_:2},1032,["id","fields","inline","no-content","submit-label","onSubmit"])]),pagination:p(({machine:s,range:r,store:l})=>[(A(!0),G(q,null,L(r,i=>(A(),x(h,{key:i,index:i,store:l,onClick:()=>S(i,s,l)},null,8,["index","store","onClick"]))),128))]),search:p(({fields:s,icon:r,id:l,inline:i,machine:c,noContent:d,store:m,submitLabel:b,variant:f})=>[u(n,{id:l,fields:s,inline:i,"no-content":d,"submit-label":b,onSubmit:a=>T(a,c,m)},{default:p(({disabled:a,form:y,submitLabel:g,type:v})=>[u(t,{disabled:a,form:y,icon:r,title:g,type:v,variant:f},null,8,["disabled","form","icon","title","type","variant"])]),_:2},1032,["id","fields","inline","no-content","submit-label","onSubmit"])]),_:1},8,["icon","title"])}}};export{N as default};
